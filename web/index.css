@import "@xyflow/react/dist/style.css";
@import "@fontsource/gasoek-one";
@import "@fontsource/dm-mono";
@import "@fontsource/dm-sans";
@import "@radix-ui/themes/styles.css";
@import "/web/brand-theme.css";

html,
body,
#root {
    height: 100%;
    margin: 0;
    font-size: 1rem;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.wrapper-div {
    width: max-content;
    height: max-content;
    padding: 0;
    margin: 0;
    border: 0;
    &:focus {
        border: none;
        outline: none;
    }
}

.node-context-menu-content {
    --accent-contrast: var(--category-contrast);
    --accent-9: var(--category-color);
}

.edge-context-menu-content {
    --accent-9: var(--type-color);
}

.react-flow {
    --xy-selection-background-color-default: var(--accent-a1);
    --xy-selection-border-default: 2px dotted var(--accent-9);
}

.react-flow__node,
.react-flow__node.selected {
    background-color: transparent !important;
    border: none;
    box-shadow: none !important;
    outline: none;
}

.dark {
    --xy-controls-button-background-color: var(--gray-2);
    --xy-controls-button-color: var(--gray-11);
    --xy-background-color: var(--gray-1);
}

.react-flow__panel {
    border-radius: var(--radius-2);
    border-width: 2px;
    overflow: hidden;
}

.react-flow__panel {
    background: var(--color-panel);
}

path.react-flow__edge-path {
    stroke: rgba(0, 0, 0, 0.01);
}

.port-label {
    fontfamily: var(--code-font-family);
    fontstyle: italic;
}

.node-type-header {
    font-family: var(--code-font-family);
    font-weight: bold;
    font-size: var(--font-size-5);
    padding-top: 0.25rem;
    margin-top: 0;
    text-align: center;
}

.target {
    color: var(--type-color);
    border-color: var(--type-color);
}

.source {
    background: var(--type-color);
}

.rope-path {
    fill: none;
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.2));
    stroke: var(--type-color);
    &.selected {
        filter: drop-shadow(0px 0px 7px var(--type-color));
    }
}

.start-marker,
.end-marker {
    fill: var(--type-color);
    &.selected {
        filter: drop-shadow(0px 0px 7px var(--type-color));
    }
}

.dark,
.dark-theme {
    .react-flow__minimap-node {
        --card-background-color-weight: 40%;
    }
}

.react-flow__minimap-node {
    color: var(--category-color);
    --card-background-color-weight: 65%;
    fill: color-mix(
        in srgb,
        currentColor,
        var(--gray-contrast) var(--card-background-color-weight)
    );
    stroke: currentColor;
    stroke-width: 2px;
}

.Any {
    --type-color: var(--any-color);
}

.AnyField {
    --type-color: var(--field-color);
}

.AnyProceduralField {
    --type-color: var(--field-color);
}

.AnyProceduralFieldWithDimensionality {
    --type-color: var(--field-color);
}

.Field {
    --type-color: var(--field-color);
}

.AnyTexture {
    --type-color: var(--field-color);
}

.Texture {
    --type-color: var(--field-color);
}

.ProceduralField {
    --type-color: var(--field-color);
}

.AnyNumber {
    --type-color: var(--number-color);
}

.AnyFloat {
    --type-color: var(--float-color);
}

.Float {
    --type-color: var(--float-color);
}

.Int {
    --type-color: var(--int-color);
}

.Bool {
    --type-color: var(--bool-color);
}

.SlabMaterial {
    --type-color: var(--material-color);
}

.AnyMaterial {
    --type-color: var(--material-color);
}

.Material {
    --type-color: var(--material-color);
}

.AnyVectorOrScalar {
    --type-color: var(--material-color);
}

.glow {
    box-shadow: 0px 0px 7px currentColor;
}

.node-type-heading {
    color: color-mix(in srgb, var(--category-color), var(--gray-12) 30%);
}

.dark,
.dark-theme {
    .node-type-heading {
        color: var(--category-color);
    }
}

.node-type-heading {
    padding-top: var(--space-2);
    font-family: var(--code-font-family);
}

@keyframes ping {
    0% {
        box-shadow: 0px 0px 7px currentColor;
    }
    75%,
    100% {
        box-shadow: 0px 0px 20px currentColor;
    }
}

.node-contents {
    position: absolute;
    top: 0;
    left: 0;
    transform-origin: 0% 0%;
    padding: 0;
    --card-background-color-weight: 90%;
    display: block;

    .dark {
        --card-background-color-weight: 30%;
    }

    background-color: color-mix(
        in srgb,
        currentColor,
        var(--card-background-color) var(--card-background-color-weight)
    );

    color: var(--category-color);

    &.selected {
        box-shadow: 0px 0px 7px currentColor;
        animation: ping 2s ease-in-out alternate-reverse infinite;
    }
}

.react-flow__nodesselection-rect,
.react-flow__nodesselection {
    visibility: hidden;
    pointer-events: none;
}

.react-flow__edge-path {
    visibility: hidden;
}

.node-contents::after {
    box-shadow: 0 0 2px currentColor;
}

.connection {
    z-index: 10000;
}

.react-flow__connectionline {
    z-index: 10000;
}

.category-output {
    --category-color: var(--output-color);
    --category-contrast: var(--output-color-contrast);
}

.category-utility {
    --category-color: var(--utility-color);
    --category-contrast: var(--utility-color-contrast);
}

.category-math {
    --category-color: var(--math-color);
    --category-contrast: var(--math-color-contrast);
}

.category-material-category {
    --category-color: var(--material-category-color);
    --category-contrast: var(--material-category-color-contrast);
}

.category-logic {
    --category-color: var(--logic-color);
    --category-contrast: var(--logic-color-contrast);
}

.category-builtins {
    --category-color: var(--builtins-color);
    --category-contrast: var(--builtins-color-contrast);
}

.node-menu__category-label {
    color: var(--category-color);
}

.preview-node-menu-item {
    color: var(--category-color);
    &:hover,
    &:focus,
    &[data-state="instant-open"],
    &[data-state="open"] {
        background: var(--category-color);
        color: var(--category-contrast);
    }
}

.favourites-node-menu-item {
    color: var(--yellow-11);
    &:hover,
    &:focus,
    &[data-state="instant-open"],
    &[data-state="open"] {
        background: var(--yellow-9);
        color: var(--yellow-contrast);
    }
}

.AnyTexture {
    --type-color: var(--field-color);
}

.Texture {
    --type-color: var(--field-color);
}

.ProceduralField {
    --type-color: var(--field-color);
}

.AnyNumber {
    --type-color: var(--number-color);
}

.AnyFloat {
    --type-color: var(--float-color);
}

.Float {
    --type-color: var(--float-color);
}

.Int {
    --type-color: var(--int-color);
}

.Bool {
    --type-color: var(--bool-color);
}

.SlabMaterial {
    --type-color: var(--material-color);
}

.Material {
    --type-color: var(--material-color);
}

.application-menu-box {
    position: absolute;
    top: 0;
    left: 0;
    margin: 1em;
    z-index: 100;
}

.application-menu-trigger {
    width: 4em;
    height: 4em;
    box-shadow: var(--shadow-4);
    .logo-button {
        width: 2rem;
        height: 2rem;
        margin: "0 auto";
    }
}

.action-menu-item {
    margin-left: var(--space-1);
    margin-right: var(--space-1);
    padding: var(--space-1);
    padding-left: var(--space-2);
    padding-right: var(--space-2);
    user-select: none;
    .action-menu-title {
        text-transform: capitalize;
    }
    &[data-highlighted="true"] {
        background-color: var(--accent-9);
        color: var(--accent-contrast);
        border-radius: var(--radius-2);
        .action-menu-description,
        .action-menu-shortcut {
            color: var(--accent-contrast);
        }
    }
}

.action-menu-list {
    padding: 0;
    margin-top: 0;
}

.action-menu-list-container {
    margin: 0;
    margin-bottom: 0;
    max-height: min(550px, 75dvh);
}

.action-menu {
    width: min(400px, 75dvw);
    overflow: hidden;
    padding-left: 0;
    padding-right: 0;
    padding-top: var(--space-2);
    overflow: visible;
    padding-bottom: 0;
}

.action-menu-search {
    background-color: var(--color-background);
    margin-left: var(--space-2);
    margin-right: var(--space-2);
    margin-bottom: var(--space-2);
    box-shadow: var(--shadow-3);
}

.action-menu-callout {
    margin: var(--space-2);
}

.rt-DialogOverlay:has(.action-menu-search) {
    &::before {
        background: transparent !important;
    }
}

.breadcrumb {
    .file-name-editable:focus-within {
        border: 0;
        outline: none;
        text-decoration: underline;
    }

    .breadcrumb-item {
        color: var(--gray-10);
        font-family: var(--brand-font-family);
        user-select: none;
        &.file-name-breadcrumb {
            cursor: text !important;
        }
        &.file-name-breadcrumb:hover,
        &.file-name-breadcrumb:focus-within,
        &.file-name-breadcrumb:focus {
            color: var(--accent-11);
        }
        &.file-name-breadcrumb {
            outline: none;
        }
    }
}

.junction-separator {
    background-color: var(--category-color);
}

@keyframes background-scroll {
    from {
        background-position-x: 0%;
    }

    to {
        background-position-x: 200%;
    }
}
.junction::before {
    background-image: url("/web/junction-background.svg");
    background-size: 65%;
    animation-name: background-scroll;
    animation-iteration-count: infinite;
    animation-duration: 5s;
    animation-timing-function: linear;
    animation-play-state: running;
    transition-property: animation;
    transition-timing-function: cubic-bezier(0.6, -0.28, 0.735, 0.045);
    transition-duration: 1s;
}

.junction[data-connected="false"]::before {
    animation-play-state: paused;
}

.dark,
.dark-theme {
    .junction::before {
        background-image: url("/web/junction-background-dark.svg");
    }
}

@media (prefers-reduced-motion) {
    .junction::before {
        animation: none;
    }
}

.react-flow__node-output {
    width: unset;
    height: unset;
    padding: unset;
    border-radius: unset;
    font-size: unset;
    color: unset;
    text-align: unset;
}

.react-flow__viewport-portal {
    z-index: -100;
}
